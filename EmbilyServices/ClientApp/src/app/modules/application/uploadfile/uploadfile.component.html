
<div *ngIf="docInfo && docInfo.fileType != 'none'">
    <br />
    <ngb-alert type="info" [dismissible]="false">
        <a class="link" (click)="open(modalContent)">Click here to see the document we have on file.</a>
    </ngb-alert>
</div>
<div>
    <ngb-alert *ngIf="progressStatus == 'progress'" type="info" [dismissible]="false">
        Uploading...
        <div class="text-center">
            <app-spinner-rect></app-spinner-rect>
        </div>
        Upload might take up to a several minutes depending on the size of the file and the connection speed. High
        resolution phone pictures, such as those from iPhone X, might take up to 5 minutes to upload.
    </ngb-alert>
    <ngb-alert *ngIf="progressStatus == 'success'" type="success" [dismissible]="false">
        <strong>Success!</strong>
        <br />
        <strong>{{progressSuccessMessage}}</strong>
    </ngb-alert>
    <ngb-alert *ngIf="progressStatus == 'error'" type="danger" [dismissible]="false">
        <strong>Error!</strong> A problem has been occurred while updating:
        <br />
        <strong>{{progressErrorMessage}}</strong>
    </ngb-alert>
</div>
<img #uploadPreview class="img-fluid" />
<div *ngIf="filename">File <b>{{filename}}</b> selected</div>
<div class="row">
    <div class="col-md-12">
        <div class="control-fileupload">
            <label for="file">{{fileLabel}}</label>
            <input type="file" #fileInput class="form-control" accept="image/gif, image/jpeg, image/jpg, image/png, application/pdf" (change)="previewImage()" />
        </div>
    </div>
</div>
<button id="uploadFileBtn" *ngIf="showUploadButton" type="button" (click)="upload()" class="btn btn-success"><app-spinner-round *ngIf="progressStatus == 'progress'"></app-spinner-round> Upload File</button>

<ng-template #modalContent let-c="close" let-d="dismiss" size="lg">
    <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title" id="lostModalLabel">Document viewer</h4>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <div style="height: 640px">

                <ng2-pdfjs-viewer *ngIf="docInfo.fileType == 'application/pdf'"
                                  pdfSrc="/api/Application/GetFile/{{docInfo.documentId}}"
                                  [download]="false">
                </ng2-pdfjs-viewer>

                <ngx-image-viewer *ngIf="images && docInfo.fileType == 'image/jpeg' || docInfo.fileType == 'image/png'" [src]="images"></ngx-image-viewer>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" ngbAutofocus class="btn btn-outline-primary" (click)="c('Close click')">Close</button>
        </div>
    </div>
</ng-template>

